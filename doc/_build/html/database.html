

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>database module &mdash; Python Educa 0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Python Educa 0.1 documentation" href="index.html"/>
        <link rel="next" title="getEducaData module" href="geteducadata.html"/>
        <link rel="prev" title="Notakeb module" href="notakeb.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Python Educa
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="notakeb.html">Notakeb module</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">database module</a></li>
<li class="toctree-l1"><a class="reference internal" href="geteducadata.html">getEducaData module</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Python Educa</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>database module</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/database.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="database-module">
<h1>database module<a class="headerlink" href="#database-module" title="Permalink to this headline">¶</a></h1>
<p>Contents:</p>
<span class="target" id="module-database"></span><dl class="class">
<dt id="database.database">
<em class="property">class </em><code class="descclassname">database.</code><code class="descname">database</code><span class="sig-paren">(</span><em>db</em>, <em>lang='es'</em><span class="sig-paren">)</span><a class="headerlink" href="#database.database" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="database.database.configure">
<code class="descname">configure</code><span class="sig-paren">(</span><em>year</em>, <em>periods</em>, <em>unekoeb=1</em>, <em>excludedCourses=[]</em>, <em>baliogabekolaburdurak=[]</em><span class="sig-paren">)</span><a class="headerlink" href="#database.database.configure" title="Permalink to this definition">¶</a></dt>
<dd><p>Configures course and group ploting
:param year: The year whose marks will be plotted
:param periods: Evaluative period list
:param unekoeb: Current period as int (as index+1 for the list)
:param excludedCourses: Courses that won&#8217;t generate a plot
:param baliogabekolaburdurak: Abreviations that won&#8217;t generate a plot
:return:</p>
</dd></dl>

<dl class="method">
<dt id="database.database.delete_last_years_grades">
<code class="descname">delete_last_years_grades</code><span class="sig-paren">(</span><em>year=''</em><span class="sig-paren">)</span><a class="headerlink" href="#database.database.delete_last_years_grades" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="database.database.generate_all_tables">
<code class="descname">generate_all_tables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#database.database.generate_all_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates all database tables:
names
yeardata
sbujects
grades</p>
</dd></dl>

<dl class="method">
<dt id="database.database.generate_grade_table">
<code class="descname">generate_grade_table</code><span class="sig-paren">(</span><em>cur=None</em><span class="sig-paren">)</span><a class="headerlink" href="#database.database.generate_grade_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates the database for storing the information
about students&#8217;s  grades
:return:</p>
</dd></dl>

<dl class="method">
<dt id="database.database.generate_names_table">
<code class="descname">generate_names_table</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#database.database.generate_names_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates the database for storing the the names and their codes
:return:</p>
</dd></dl>

<dl class="method">
<dt id="database.database.generate_subjects_table">
<code class="descname">generate_subjects_table</code><span class="sig-paren">(</span><em>cur=None</em><span class="sig-paren">)</span><a class="headerlink" href="#database.database.generate_subjects_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates the database for storing the information
about subjects: Their names, and relations
:return:</p>
</dd></dl>

<dl class="method">
<dt id="database.database.generate_yeardata_table">
<code class="descname">generate_yeardata_table</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#database.database.generate_yeardata_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates the database for storing the students situation each course
:return:</p>
</dd></dl>

<dl class="method">
<dt id="database.database.get_cascading">
<code class="descname">get_cascading</code><span class="sig-paren">(</span><em>years=None</em>, <em>lang=None</em><span class="sig-paren">)</span><a class="headerlink" href="#database.database.get_cascading" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets all courses, if year and lang provided
If years not provided returns years
if lang not provided but years is returns lang
:return:</p>
</dd></dl>

<dl class="method">
<dt id="database.database.get_courses">
<code class="descname">get_courses</code><span class="sig-paren">(</span><em>year=None</em>, <em>student=None</em><span class="sig-paren">)</span><a class="headerlink" href="#database.database.get_courses" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets all years stored in the database
:param year: Year of wich courses will be returned
:param student: Student of whose courses will be returned
:return:</p>
</dd></dl>

<dl class="method">
<dt id="database.database.get_csv_header_index">
<code class="descname">get_csv_header_index</code><span class="sig-paren">(</span><em>header</em>, <em>valuedic</em><span class="sig-paren">)</span><a class="headerlink" href="#database.database.get_csv_header_index" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="database.database.get_promotion_stats">
<code class="descname">get_promotion_stats</code><span class="sig-paren">(</span><em>year=None</em>, <em>course=None</em>, <em>lang=None</em><span class="sig-paren">)</span><a class="headerlink" href="#database.database.get_promotion_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns promotion data and its relation with course repeating
params should be lists
without parameters: SELECT repeating, promoting, count(&#8216;uniquename&#8217;) FROM yeardata  GROUP BY repeating,promoting
with year: SELECT repeating, promoting, count(&#8216;uniquename&#8217;) FROM yeardata WHERE year=&#8216;2011-2012&#8217; GROUP BY repeating,promoting
with course: SELECT repeating, promoting, count(&#8216;uniquename&#8217;) FROM yeardata WHERE course =&#8216;1. DBH&#8217; GROUP BY repeating,promoting
with lang: SELECT repeating, promoting, count(&#8216;uniquename&#8217;) FROM yeardata WHERE lang =&#8217;D&#8217; GROUP BY repeating,promoting
with year and course: SELECT repeating, promoting, count(&#8216;uniquename&#8217;) FROM yeardata WHERE year=&#8216;2011-2012&#8217; AND  course =&#8216;1. DBH&#8217; GROUP BY repeating,promoting
with year and lang: SELECT repeating, promoting, count(&#8216;uniquename&#8217;) FROM yeardata WHERE year=&#8216;2011-2012&#8217; AND  lang =&#8217;D&#8217; GROUP BY repeating,promoting
with lang and course: SELECT repeating, promoting, count(&#8216;uniquename&#8217;) FROM yeardata WHERE course =&#8216;1. DBH&#8217; AND  lang =&#8217;D&#8217; GROUP BY repeating,promoting
SELECT repeating, promoting, count(&#8216;uniquename&#8217;) FROM yeardata WHERE (course=&#8216;2. Batxilergoa LOE&#8217;) AND (lang=&#8217;A&#8217; OR lang=&#8217;G&#8217;) GROUP BY repeating,promoting
with lang, year and course: SELECT repeating, promoting, count(&#8216;uniquename&#8217;) FROM yeardata WHERE year=&#8216;2011-2012&#8217; AND  course =&#8216;1. DBH&#8217; AND  lang =&#8217;D&#8217; GROUP BY repeating,promoting</p>
</dd></dl>

<dl class="method">
<dt id="database.database.get_subject_id">
<code class="descname">get_subject_id</code><span class="sig-paren">(</span><em>subject</em><span class="sig-paren">)</span><a class="headerlink" href="#database.database.get_subject_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a subjects id in abreiatons table</p>
</dd></dl>

<dl class="method">
<dt id="database.database.get_subjects_codes">
<code class="descname">get_subjects_codes</code><span class="sig-paren">(</span><em>cur=None</em><span class="sig-paren">)</span><a class="headerlink" href="#database.database.get_subjects_codes" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets all subjects and their codes stored in the database
:return:</p>
</dd></dl>

<dl class="method">
<dt id="database.database.get_years">
<code class="descname">get_years</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#database.database.get_years" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets all years stored in the database
:return:</p>
</dd></dl>

<dl class="method">
<dt id="database.database.insert_abreviatons">
<code class="descname">insert_abreviatons</code><span class="sig-paren">(</span><em>file</em><span class="sig-paren">)</span><a class="headerlink" href="#database.database.insert_abreviatons" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>file</strong> &#8211; A file with the following format:</td>
</tr>
</tbody>
</table>
<p>Subject,LAB,ABR,course
Arte eta Teknologia Esparrua 1,ATE,AAT,1
:return None</p>
</dd></dl>

<dl class="method">
<dt id="database.database.insert_grades">
<code class="descname">insert_grades</code><span class="sig-paren">(</span><em>files</em>, <em>deletelast=False</em><span class="sig-paren">)</span><a class="headerlink" href="#database.database.insert_grades" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>files</strong> &#8211; A list of csv files with the following format:</td>
</tr>
</tbody>
</table>
<p>Ikasturtea,Taldea,Kurtso,Hizkuntza eredua,Izen Osoa,Irakasgaiaren Izena,Ebaluaketa,Zenbakizko nota ohikoa
[&#8216;2013-2014&#8217;, &#8216;1. I&#8217;, &#8216;1. DBH&#8217;, &#8216;D&#8217;, &#8216;XXXXX&#8217;, &#8216;Gizarte Zientziak, Geografia eta Historia BH1&#8217;, &#8216;2. Ebaluaketa&#8217;, &#8216;9&#8217;]
:param deletelast: Last or better current year grades are imported for each period. If this is true all years data is deleted
before inserting again. If it is false all data is added
:return: None</p>
</dd></dl>

<dl class="method">
<dt id="database.database.insert_names">
<code class="descname">insert_names</code><span class="sig-paren">(</span><em>files</em><span class="sig-paren">)</span><a class="headerlink" href="#database.database.insert_names" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>files</strong> &#8211; A list of csv files with the following format:</td>
</tr>
</tbody>
</table>
<p>Izen Osoa,Usuario EDUCA,Erabiltzaile Izen Bakarra
[&#8216;Urio Larrea, Asier&#8217;, &#8216;654asdfa&#8217;, &#8216;auriolar&#8217;]
:return: None</p>
</dd></dl>

<dl class="method">
<dt id="database.database.insert_yeardata">
<code class="descname">insert_yeardata</code><span class="sig-paren">(</span><em>files</em><span class="sig-paren">)</span><a class="headerlink" href="#database.database.insert_yeardata" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>files</strong> &#8211; A list of csv files with the following format:</td>
</tr>
</tbody>
</table>
<p>Izen Osoa,Usuario EDUCA,Erabiltzaile Izen Bakarra
[&#8216;Urio Larrea, Asier&#8217;, &#8216;654asdfa&#8217;, &#8216;auriolar&#8217;]
:return: None</p>
</dd></dl>

<dl class="method">
<dt id="database.database.process_promotion_stats">
<code class="descname">process_promotion_stats</code><span class="sig-paren">(</span><em>results</em><span class="sig-paren">)</span><a class="headerlink" href="#database.database.process_promotion_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>processes promotion stats generated by get_promotion_stats:
Plots and outputs and csv string</p>
</dd></dl>

<dl class="method">
<dt id="database.database.test_promoting">
<code class="descname">test_promoting</code><span class="sig-paren">(</span><em>year=None</em><span class="sig-paren">)</span><a class="headerlink" href="#database.database.test_promoting" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="database.database.test_students">
<code class="descname">test_students</code><span class="sig-paren">(</span><em>year=None</em><span class="sig-paren">)</span><a class="headerlink" href="#database.database.test_students" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests if every student has grades, name and is in yeardata</p>
</dd></dl>

<dl class="method">
<dt id="database.database.test_subjects">
<code class="descname">test_subjects</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#database.database.test_subjects" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests if every subject has its abreviation and data</p>
</dd></dl>

<dl class="method">
<dt id="database.database.update_end_yeardata">
<code class="descname">update_end_yeardata</code><span class="sig-paren">(</span><em>files</em><span class="sig-paren">)</span><a class="headerlink" href="#database.database.update_end_yeardata" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>files</strong> &#8211; A list of csv files with the following format:</td>
</tr>
</tbody>
</table>
<p>Ikasturtea,Baja Destinoa, Erabiltzaile Izen bakarra, Tituluaren Gaineko erabakia, ikurtsoz igarotzearen gaineko erabakia
[&#8216;2007-2008&#8217;;&#8217;&#8216;;&#8217;auriolar&#8217;;&#8217;&#8216;;&#8217;Bai, deialdi arrutenan&#8217;]
:return: None</p>
</dd></dl>

<dl class="method">
<dt id="database.database.update_primaryschool_data">
<code class="descname">update_primaryschool_data</code><span class="sig-paren">(</span><em>files</em><span class="sig-paren">)</span><a class="headerlink" href="#database.database.update_primaryschool_data" title="Permalink to this definition">¶</a></dt>
<dd><p>new function to add primary school for existing sutdents
This information is not in EDUCA so they have to send it</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>files</strong> &#8211; A list of csv files with the following format:</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="database.database.update_promotion_data">
<code class="descname">update_promotion_data</code><span class="sig-paren">(</span><em>files</em><span class="sig-paren">)</span><a class="headerlink" href="#database.database.update_promotion_data" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>files</strong> &#8211; A list of csv files with the following format:</td>
</tr>
</tbody>
</table>
<p>Izen Osoa,Usuario EDUCA,Erabiltzaile Izen Bakarra
[&#8216;Urio Larrea, Asier&#8217;, &#8216;654asdfa&#8217;, &#8216;auriolar&#8217;]
:return: None</p>
</dd></dl>

</dd></dl>

</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="geteducadata.html" class="btn btn-neutral float-right" title="getEducaData module" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="notakeb.html" class="btn btn-neutral" title="Notakeb module" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Asier Urío Larrea.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>